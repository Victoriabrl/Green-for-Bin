{% extends "base.html" %}

{% block title %}{{ _('Base de données') }}{% endblock %}

{% block content %}
<h2>{{ _('Banque de données : Images Uploadées') }}</h2>

<table border="1" cellpadding="8" cellspacing="0" style="border-collapse: collapse; width: 100%;">
    <thead style="background-color: #f0f0f0;">
        <tr>
            {% for col in colonnes %}
                <th data-col="{{ col }}">{{ col }}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for row in rows %}
            <tr>
                {% for col in colonnes %}
                    <td data-label="{{ col }}"
                        {% if col == 'hist_rgb' or col == 'hist_lum' %}
                            style="min-width:220px; max-width:260px; word-wrap: break-word; text-align: center; vertical-align: middle;"
                        {% else %}
                            style="max-width: 300px; word-wrap: break-word; text-align: center; vertical-align: middle;"
                        {% endif %}
                    >
                        {% if col == 'hist_rgb' or col == 'hist_lum' %}
                            {% if row[col] is string and row[col].startswith("data:image/png;base64") %}
                                <img src="{{ row[col] }}" alt="{{ col }}"
                                     style="max-width: 220px; max-height: 120px; width: 100%; height: auto; display: block; margin: 0 auto; border-radius: 12px; box-shadow: 0 2px 8px #b9f6ca33;">
                            {% else %}
                                {{ row[col]|safe }}
                            {% endif %}
                        {% else %}
                            {{ row[col]|safe }}
                        {% endif %}
                    </td>
                {% endfor %}
            </tr>
        {% endfor %}
    </tbody>
</table>

{% if not rows %}
    <p>Aucune donnée trouvée dans la base.</p>
{% endif %}
{% endblock %}
